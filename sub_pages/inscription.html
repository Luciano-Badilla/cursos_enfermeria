<!DOCTYPE html>
<html lang="es">

<head>
    <title>Inscripción</title>
    <link rel="icon" href="https://cdn.iconscout.com/icon/free/png-256/free-hospital-2206985-1841178.png"
        type="image/png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Roboto', sans-serif;
        }

        .container {
            min-width: 100%;
        }

        .error-message {
            color: #e53e3e;
            font-size: 0.875rem;
            display: none;
        }
    </style>
</head>

<body>
    <div class="container mx-0 px-4 py-8 w-full">
        <div class="bg-white shadow-md rounded-lg w-full flex flex-col">
            <div class="p-6 border-b flex-grow">
                <h2 class="text-2xl font-bold">Formulario de Inscripción</h2>
                <p class="text-gray-700 text-lg">Por favor, completa tus datos para inscribirte al curso.</p>
            </div>
            <div class="flex-grow p-6 overflow-auto">
                <div class="mb-8">
                    <div class="flex justify-between mb-4">
                        <div id="progress-step-1" class="w-1/3 h-4 rounded-l-full bg-green-500"></div>
                        <div id="progress-step-2" class="w-1/3 h-4 bg-green-200"></div>
                        <div id="progress-step-3" class="w-1/3 h-4 rounded-r-full bg-green-200"></div>
                    </div>
                    <div class="flex justify-between text-base font-medium">
                        <span>Información personal</span>
                        <span>Detalles del curso</span>
                        <span>Confirmación</span>
                    </div>
                </div>
                <form id="inscripcion-form" novalidate>
                    <div id="step-1" class="space-y-6">
                        <div class="flex flex-col space-y-2">
                            <label for="nombre" class="font-semibold text-lg">Nombre completo</label>
                            <input id="nombre" name="nombre" type="text" class="border rounded px-5 py-4 w-full text-lg"
                                required>
                            <p class="error-message text-sm text-red-500" id="error-nombre">Este campo es obligatorio.
                            </p>
                        </div>
                        <div class="flex flex-col space-y-2">
                            <label for="email" class="font-semibold text-lg">Correo electrónico</label>
                            <input id="email" name="email" type="email" class="border rounded px-5 py-4 w-full text-lg"
                                required>
                            <p class="error-message text-sm text-red-500" id="error-email">Ingrese un correo electrónico
                                válido.</p>
                        </div>
                        <div class="flex flex-col space-y-2">
                            <label for="telefono" class="font-semibold text-lg">Teléfono</label>
                            <input id="telefono" name="telefono" type="tel"
                                class="border rounded px-5 py-4 w-full text-lg" required>
                            <p class="error-message text-sm text-red-500" id="error-telefono">Este campo es obligatorio.
                            </p>
                        </div>
                    </div>
                    <!-- Ajustes similares para los pasos 2 y 3 -->
                </form>
            </div>
            <div class="p-6 border-t">
                <div class="flex justify-between w-full">
                    <button id="prev-button"
                        class="bg-gray-300 text-gray-800 px-6 py-4 rounded-lg text-lg hidden">Anterior</button>
                    <button id="next-button"
                        class="bg-black text-white px-6 py-4 rounded-lg text-lg ml-auto">Siguiente</button>
                </div>
            </div>
        </div>
    </div>



    <script>
        let currentStep = 1;

        const steps = [
            document.getElementById('step-1'),
            document.getElementById('step-2'),
            document.getElementById('step-3')
        ];

        const progressSteps = [
            document.getElementById('progress-step-1'),
            document.getElementById('progress-step-2'),
            document.getElementById('progress-step-3')
        ];

        const prevButton = document.getElementById('prev-button');
        const nextButton = document.getElementById('next-button');

        function showStep(step) {
            steps.forEach((s, index) => {
                s.classList.toggle('hidden', index !== step - 1);
            });

            progressSteps.forEach((p, index) => {
                p.classList.toggle('bg-green-500', index < step);
                p.classList.toggle('bg-gray-200', index >= step);
            });

            prevButton.classList.toggle('hidden', step === 1);
            nextButton.textContent = step === 3 ? 'Finalizar inscripción' : 'Siguiente';
        }

        function validateStep(step) {
            const fields = steps[step - 1].querySelectorAll('input, select');
            let isValid = true;

            fields.forEach(field => {
                let errorMessage = document.getElementById(`error-${field.id}`);

                if (field.type === 'radio' && field.name === 'genero') {
                    const isGenderSelected = document.querySelector('input[name="genero"]:checked');
                    errorMessage = document.getElementById('error-genero');

                    if (!isGenderSelected) {
                        errorMessage.style.display = 'block';
                        isValid = false;
                    } else {
                        errorMessage.style.display = 'none';
                    }
                } else if (errorMessage) {
                    if (!field.checkValidity()) {
                        errorMessage.style.display = 'block';
                        isValid = false;
                    } else {
                        errorMessage.style.display = 'none';
                    }
                }
            });

            return isValid;
        }

        nextButton.addEventListener('click', () => {
            if (validateStep(currentStep)) {
                if (currentStep === 3) {
                    // Obtener los parámetros de la URL actual
                    const urlParams = new URLSearchParams(window.location.search);
                    const nombre = urlParams.get('nombre');
                    const imagen = urlParams.get('imagen');
                    const precio = urlParams.get('precio');

                    // Verificar que los valores no sean null o vacíos
                    if (nombre && imagen && precio) {
                        // Construir la URL de redirección a la página de pago
                        const url = new URL('payment.html', window.location.href); // Usa window.location.href para el entorno local
                        url.searchParams.set('nombre', nombre);
                        url.searchParams.set('imagen', imagen);
                        url.searchParams.set('precio', precio);

                        // Redirigir a la página de pago con los parámetros en la URL
                        window.location.href = url.toString();
                    } else {
                        console.error('Uno o más parámetros están vacíos o no presentes en la URL actual.');
                    }
                } else {
                    currentStep++;
                    showStep(currentStep);
                }
            }
        });



        prevButton.addEventListener('click', () => {
            currentStep--;
            showStep(currentStep);
        });

        showStep(currentStep);
    </script>
</body>

</html>
